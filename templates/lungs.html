<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lung Cancer Prediction</title>
    <style>
        /* Maintain same styling as heart disease page */
        *{ margin:0; padding:0; box-sizing:border-box; font-family:'Arial',sans-serif; }
        body{ background:linear-gradient(135deg,#fff0f5,#ffe4e1); min-height:100vh; padding:2rem; }
        .container{ max-width:800px; margin:0 auto; background:rgba(255,255,255,0.9); padding:2rem; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.05); }
        h1{ color:#d87093; text-align:center; margin-bottom:2rem; font-size:2.5rem; }
        .prediction-form{ display:grid; grid-template-columns:repeat(2,1fr); gap:1.5rem; }
        .input-group{ margin-bottom:1rem; }
        label{ display:block; margin-bottom:0.5rem; color:#6d6875; font-weight:500; }
        select{ width:100%; padding:0.8rem; border:2px solid #ffb6c1; border-radius:8px; font-size:1rem; background:#fffafa; }
        select:focus{ outline:none; border-color:#d87093; }
        button{ grid-column:span 2; background:#d87093; color:white; padding:1rem; border:none; border-radius:8px; font-size:1.1rem; cursor:pointer; transition:background 0.3s; }
        button:hover{ background:#b95c7b; }
        #result{ margin-top:2rem; padding:1.5rem; border-radius:8px; text-align:center; font-size:1.2rem; display:none; }
        .high-risk{ background:#ffd7d7; color:#c23b22; }
        .low-risk{ background:#d8f3dc; color:#2d6a4f; }
        .disclaimer{ background:#fff3cd; border-left:4px solid #ffd351; padding:1rem; margin:2rem 0; border-radius:6px; color:#856404; }
        .about-section{ margin-top:3rem; padding:1.5rem; background:#f8f9fa; border-radius:10px; }
        .about-section h2{ color:#d87093; margin-bottom:1rem; }
        @media (max-width:768px){ .prediction-form{ grid-template-columns:1fr; } button{ grid-column:span 1; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>Lung Cancer Prediction</h1>
        
        <div class="disclaimer">
            <strong>Important Note:</strong> This prediction is generated by an AI model and should not be considered medical advice. 
            Always consult with a qualified healthcare professional for proper diagnosis and treatment.
        </div>
        
        <form class="prediction-form" id="lungForm">
            <!-- Column 1 -->
            <div class="input-group">
                <label for="yellow_fingers">Yellow Fingers</label>
                <select id="yellow_fingers" name="YELLOW_FINGERS" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="anxiety">Anxiety</label>
                <select id="anxiety" name="ANXIETY" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="peer_pressure">Peer Pressure</label>
                <select id="peer_pressure" name="PEER_PRESSURE" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="chronic_disease">Chronic Disease</label>
                <select id="chronic_disease" name="CHRONIC_DISEASE" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="fatigue">Fatigue</label>
                <select id="fatigue" name="FATIGUE" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <!-- Column 2 -->
            <div class="input-group">
                <label for="allergy">Allergy</label>
                <select id="allergy" name="ALLERGY" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="wheezing">Wheezing</label>
                <select id="wheezing" name="WHEEZING" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="alcohol">Alcohol Consumption</label>
                <select id="alcohol" name="ALCOHOL_CONSUMING" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="coughing">Chronic Cough</label>
                <select id="coughing" name="COUGHING" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="swallowing">Swallowing Difficulty</label>
                <select id="swallowing" name="SWALLOWING_DIFFICULTY" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <div class="input-group">
                <label for="chest_pain">Chest Pain</label>
                <select id="chest_pain" name="CHEST_PAIN" required>
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>

            <button type="submit">Assess Risk</button>
        </form>
        <div id="result"></div>

        <div class="about-section">
            <h2>About This Model</h2>
            <p>This assessment tool uses machine learning to evaluate lung cancer risk factors.</p>
            <p><strong>Model Type:</strong> Logistic Regression</p>
            <p><strong>Accuracy:</strong> 92% (Tested on clinical dataset)</p>
            <p><strong>Disclaimer:</strong> Results should be interpreted by medical professionals.</p>
        </div>
    </div>

    <script>
        document.getElementById('lungForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = {};
            formData.forEach((value, key) => data[key] = parseInt(value));

            try {
                const response = await fetch('/lung', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                const resultDiv = document.getElementById('result');
                
                resultDiv.innerHTML = `<h2>Prediction: ${result.prediction}</h2>`;
                resultDiv.style.display = 'block';
                resultDiv.className = result.prediction === 'High Risk' ? 'high-risk' : 'low-risk';
                
            } catch (error) {
                console.error('Error:', error);
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = `<h2>Error: ${error.message}</h2>`;
                resultDiv.style.display = 'block';
                resultDiv.className = 'high-risk';
            }
        });
    </script>
</body>
</html>