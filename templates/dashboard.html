<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Health and Fitness Dashboard - Track your activity, nutrition, and health metrics">
    <title>Health Dashboard - Track Your Fitness Metrics</title>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com/ajax/libs">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" 
          integrity="sha512-...YOUR_INTEGRITY_HASH..." 
          crossorigin="anonymous" 
          referrerpolicy="no-referrer">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" 
          rel="stylesheet"
          media="print" 
          onload="this.media='all'">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>
<body>
    <!-- Add loading state -->
    <div class="loading-overlay" aria-live="polite" aria-busy="true">
        <div class="loading-spinner"></div>
    </div>

    <div class="dashboard-container" role="main">
        <header class="header" role="banner">
            <h1>Health Dashboard</h1>
            <div class="time-range" aria-label="Time range">
                <time datetime="{{ time_range.start_time|datetimeformat('%Y-%m-%dT%H:%M') }}">
                    {{ time_range.start_time|datetimeformat('%b %d, %Y %H:%M') }}
                </time> - 
                <time datetime="{{ time_range.end_time|datetimeformat('%Y-%m-%dT%H:%M') }}">
                    {{ time_range.end_time|datetimeformat('%H:%M') }}
                </time>
            </div>
        </header>

        <!-- Metric Cards Section -->
        <section class="metrics-grid" aria-label="Health metrics">
            <!-- Steps Card -->
            <article class="card metric-card" role="region" aria-labelledby="steps-heading">
                <i class="fas fa-walking metric-icon" aria-hidden="true"></i>
                <h3 id="steps-heading">Steps</h3>
                <div class="metric-value" aria-live="polite">
                    {{ metrics.steps | default('0', true) }}
                </div>
                <div class="progress-bar" role="progressbar" 
                     aria-valuenow="{{ (metrics.steps / 10000) * 100 | round(1) }}" 
                     aria-valuemin="0" 
                     aria-valuemax="100">
                    <div class="progress-fill"></div>
                </div>
                <small>{{ (metrics.steps / 10000) * 100 | round(1) }}% of Goal</small>
            </article>

            <!-- Other metric cards with similar semantic markup -->
        </section>

        <!-- Activities Section -->
        <section class="full-width-section" aria-label="Activity history">
            <div class="card">
                <h2>Activities</h2>
                <div class="table-container" role="region" aria-labelledby="activities-table-caption">
                    <table class="activities-table" role="grid">
                        <caption id="activities-table-caption" class="sr-only">List of recent activities</caption>
                        <!-- Table content -->
                    </table>
                </div>
            </div>
        </section>

        <!-- Nutrition Section -->
        <section class="full-width-section" aria-label="Nutrition information">
            <!-- Nutrition card content -->
        </section>
    </div>

    <!-- Async load non-critical JS -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}" 
            defer 
            async 
            crossorigin="anonymous"></script>
</body>
</html>