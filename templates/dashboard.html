<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <h1>Health Dashboard</h1>
            <div class="time-range">
                <p>{{ time_range.start_time|datetimeformat('%b %d, %Y %H:%M') }} - 
                   {{ time_range.end_time|datetimeformat('%H:%M') }}</p>
            </div>
        </header>

        <!-- Steps Card -->
        <div class="card metric-card">
            <i class="fas fa-walking metric-icon"></i>
            <h3>Steps</h3>
            <div class="metric-value">{{ metrics.steps }}</div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: {{ (metrics.steps / 10000) * 100 }}%"></div>
            </div>
            <small>{{ (metrics.steps / 10000) * 100 | round(1) }}% of Goal</small>
        </div>

        <!-- Heart Rate Card -->
        <div class="card metric-card">
            <i class="fas fa-heartbeat metric-icon"></i>
            <h3>Heart Rate</h3>
            <div class="metric-value">
                {{ metrics.heart.rate[0].bpm if metrics.heart.rate else 'N/A' }}
            </div>
            <small>BPM</small>
        </div>

        <!-- Calories Card -->
        <div class="card metric-card">
            <i class="fas fa-fire metric-icon"></i>
            <h3>Calories</h3>
            <div class="metric-value">{{ "%0.0f"|format(metrics.calories) }}</div>
            <small>kcal burned</small>
        </div>

        <!-- Distance Card -->
        <div class="card metric-card">
            <i class="fas fa-route metric-icon"></i>
            <h3>Distance</h3>
            <div class="metric-value">{{ "%0.1f"|format(metrics.distance) }}</div>
            <small>kilometers</small>
        </div>

        <!-- Activities Card -->
        <div class="card full-width-card">
            <h2>Activities</h2>
            <table class="activities-table">
                <thead>
                    <tr>
                        <th>Activity</th>
                        <th>Duration</th>
                        <th>Time</th>
                        <th>Calories</th>
                    </tr>
                </thead>
                <tbody>
                    {% for activity in metrics.activities %}
                    <tr>
                        <td>{{ activity.activity }}</td>
                        <td>{{ "%0.1f"|format(activity.duration / 60) }} mins</td>
                        <td>{{ activity.start|datetimeformat('%H:%M') }} - {{ activity.end|datetimeformat('%H:%M') }}</td>
                        <td>{{ "%0.0f"|format(activity.calories) }} kcal</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Nutrition Card -->
        <div class="card full-width-card">
            <h2>Nutrition</h2>
            <div class="nutrition-grid">
                {% for nutrient in metrics.nutrition %}
                <div class="nutrition-item">
                    <h3>{{ nutrient.name }}</h3>
                    <div class="nutrition-value">
                        {{ "%0.1f"|format(nutrient.value) }}{{ nutrient.unit }}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>